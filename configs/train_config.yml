data:
  raw_data: ${RAW_DATA}
  processed_data_path: ${PROCESSED_DATA}
  test_size: 0.2
  random_state: 42

features:
  numerical:
    - MonthlyRevenue 
    - MonthlyMinutes
    - TotalRecurringCharge
    - DirectorAssistedCalls
    - OverageMinutes
    - RoamingCalls
    - PercChangeMinutes
    - PercChangeRevenues
    - DroppedCalls
    - BlockedCalls
    - UnansweredCalls
    - CustomerCareCalls
    - ThreewayCalls 
    - ReceivedCalls
    - OutboundCalls
    - InboundCalls
    - PeakCallsInOut
    - OffPeakCallsInOut
    - DroppedBlockedCalls
    - CallForwardingCalls
    - CallWaitingCalls
    - MonthsInService
    - UniqueSubs
    - ActiveSubs
    - Handsets
    - HandsetModels
    - CurrentEquipmentDays
    - AgeHH1
    - AgeHH2
    - RetentionCalls
    - RetentionOffersAccepted
    - ReferralsMadeBySubscriber
    - IncomeGroup
    - AdjustmentsToCreditRating
  categorical:
    - contract_type
    - payment_method
    - internet_service
    - ServiceArea
    - ChildrenInHH
    - HandsetRefurbished
    - HandsetWebCapable 
    - TruckOwner 
    - RVOwner 
    - Homeownership
    - BuysViaMailOrder 
    - RespondsToMailOffers 
    - OptOutMailings
    - NonUSTravel
    - OwnsComputer
    - HasCreditCard 
    - NewCellphoneUser
    - NotNewCellphoneUser
    - OwnsMotorcycle
    - HandsetPrice
    - MadeCallToRetentionTeam
    - CreditRating
    - PrizmCode
    - Occupation
    - MaritalStatus
  target: Churn
  selected_features: ['MonthlyRevenue', 'MonthlyMinutes', 'OverageMinutes', 'UnansweredCalls',
       'CustomerCareCalls', 'PercChangeMinutes', 'PercChangeRevenues',
       'ReceivedCalls', 'TotalRecurringCharge', 'CurrentEquipmentDays',
       'DroppedBlockedCalls', 'MonthsInService', 'ActiveSubs',
       'RespondsToMailOffers', 'RetentionCalls', 'RetentionOffersAccepted',
       'MadeCallToRetentionTeam', 'ReferralsMadeBySubscriber', 'CreditRating',
       'IncomeGroup', 'Occupation', 'PrizmCode','Churn']

preprocessing:
  scaler: standard 
  handle_missing: median
  handle_outliers: true
  outlier_method: iqr  

encoding:
  MadeCallToRetentionTeam:
    strategy: mapping
    "Yes": 1
    "No": 0
      
  RespondsToMailOffers:
    strategy: mapping
    mapping:
    "Yes": 1
    "No": 0
  CreditRating:
    strategy: ordinal
    categories: ["1-Highest", "2-High", "3-Good", "4-Medium", "5-Low", "6-VeryLow", "7-Lowest"]
  PrizmCode:
    strategy: onehot
    categories: ["Suburban", "Town", "Other", "Rural"]    
  Occupation:
    strategy: onehot
    categories: ["Professional", "Crafts", "Other", "Self", "Retired", "Homemaker", "Clerical", "Student"]
  
training:
  model_types: ["random_forest", "xgboost"]
  cv_folds: 5
  scoring: roc_auc
  n_jobs: -1

model_params:
  random_forest:
    n_estimators: 100
    max_depth: 10
    min_samples_split: 5
    min_samples_leaf: 2
    random_state: 42
  
  xgboost:
    n_estimators: 100
    max_depth: 6
    learning_rate: 0.1
    subsample: 0.8
    colsample_bytree: 0.8
    random_state: 42

mlflow:
    tracking_uri: "http://mlflow-server:5000"
    experiment_name: "model_comparison_v1"
    run_name: "model_comparison"

monitoring:
  log_metrics: true
  log_params: true
  log_model: true
  log_artifacts: true


azure_blob:
  account_url: ${ACCOUNT_URL}
  account_key: "${AZURE_STORAGE_ACCOUNT_KEY}"
  container_name: ${AZURE_CONTAINER_NAME}

azure:
  storage_account_name: ${AZURE_STORAGE_ACCOUNT}
  storage_account_key: ${AZURE_STORAGE_KEY}
  container_name: ${AZURE_CONTAINER_NAME}
  blob_prefix: ""

dvc:
  remote_name: "azure_remote"
  data_dir: "./data"
  tracked_files:
    - "data/raw/*.csv"
  watch_dir": "data/processed"

drift_detection:
  trigger_on_drift: true
  enabled: true
  reference_blob: ${REFERENCE_BLOB}
  reference_data_path: ${REFERENCE_DATA_PATH}
  metrics:
    - "psi" 
    - "ks"  
    - "wasserstein"
  thresholds:
    psi: 0.2
    ks: 0.1
    wasserstein: 0.15
  categorical_columns: [] 
  numerical_columns: []   

storage:
  local_cache_dir: "./cache"
  max_cache_size_gb: 10
  cleanup_old_data_days: 30

scheduler:
  check_interval_seconds: 10 
  enable_manual_trigger: true
  manual_trigger_endpoint: "/trigger"